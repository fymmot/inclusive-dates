<html lang="en"><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"><title>Accessible datepicker example | Tommy Feldt</title><link href="css/style.css" rel="stylesheet"></head><body style="text-align:center"><h1>Accessible time table</h1><section><h2>Collapsed</h2><div class="sj-table"><div class="sj-row" aria-label="Avgångstid 12:03 Ankomsttid 14:50 Inga byten" role="button" tabindex="0" aria-expanded="false"><div class="sj-text-outer"><div class="sj-text-inner"><span class="sj-text-time">12:03 - 14:50</span> <span class="sj-text-duration">Restid 2:47 h</span> <span class="sj-text-changes">Ett byte</span> <span class="sj-text-brand"></span> <span class="sj-text-operator">SJ+1</span></div></div><div class="sj-price-outer"><div class="sj-price-inner"><span class="sj-price-lower">fr. <span>508:-</span> </span><span class="sj-price-higher">fr. <span>748:-</span></span></div></div></div></div><h2>Expanded</h2><div class="sj-table expanded"><div class="sj-row"><div class="sj-text-outer" aria-label="Avgångstid 8:53 Ankomsttid 14:20 Ett byte, 2 klass från 120 kr 1 klass från 320 kr" role="button" tabindex="0" aria-expanded="true"><div class="sj-text-inner"><span class="sj-text-time">8:53 - 14:20</span> <span class="sj-text-duration">Restid 2:47 h</span> <span class="sj-text-changes">Ett byte</span> <span class="sj-text-brand"></span> <span class="sj-text-operator">SJ+1</span></div></div><div class="sj-price-outer"><div class="sj-price-inner text-right"><button id="closeBtn">Stäng</button></div></div></div><div class="sj-expanded"><div class="sj-expanded-wrapper"><div class="pt sj-prices"><fieldset><legend class="visually-hidden">Välj biljett</legend><div class="sj-pricegrid-outer"><div class="sj-pricegrid-row"><div>2 klass</div><div class="sj-pricegrid-inner" aria-label="120 kronor Andra klass kan ej ombokas" role="button" tabindex="0" aria-pressed="false"><strong>120:-</strong><br>Kan ej ombokas</div><div class="sj-pricegrid-inner" aria-label="170 kronor Andra klass kan ej ombokas" role="button" tabindex="0" aria-pressed="true"><strong>170:-</strong><br>Kan ombokas</div><div class="sj-pricegrid-inner" aria-label="220 kronor Andra klass kan återbetalas" role="button" tabindex="0" aria-pressed="false"><strong>220:-</strong><br>Kan återbetalas</div></div><div class="sj-pricegrid-row"><div>2 klass lugn</div><div class="sj-pricegrid-inner" aria-label="170 kronor Andra klass lugn kan ej ombokas" role="button" tabindex="0" aria-pressed="false"><strong>170:-</strong><br>Kan ej ombokas</div><div class="sj-pricegrid-inner" aria-label="225 kronor Andra klass lugn kan ombokas" role="button" tabindex="0" aria-pressed="false"><strong>225:</strong>-<br>Kan ombokas</div><div class="sj-pricegrid-inner" aria-label="300 kronor Andra klass lugn kan återbetalas" role="button" tabindex="0" aria-pressed="false"><strong>300:</strong>-<br>Kan återbetalas</div></div><div class="sj-pricegrid-row"><div>1 klass</div><div class="sj-pricegrid-inner" aria-label="310 kronor Första klass kan ej ombokas" role="button" tabindex="0" aria-pressed="false"><strong>310:-</strong><br>Kan ej ombokas</div><div class="sj-pricegrid-inner" aria-label="350 kronor Första klass kan ombokas" role="button" tabindex="0" aria-pressed="false"><strong>350:-</strong><br>Kan ombokas</div><div class="sj-pricegrid-inner" aria-label="420 kronor Första klass kan återbetalas" role="button" tabindex="0" aria-pressed="false"><strong>420:-</strong><br>Kan återbetalas</div></div></div></fieldset></div><div class="pt sj-traininfo"><ol aria-label="Delsträckor"><li aria-label="Delsträcka 1"><h4>8:53 Stockholm C - Göteborg C</h4><p>SJ Snabbtåg</p><p>Restid 4:10 h</p><p>Ank. 13:03 Göteborg C, Byte 1.</p></li><li aria-label="Delsträcka 2"><div><h4>13:10 Göteborg C - Lysekil</h4><p>Västtrafik Länstrafik, Spårvagn 13</p><p>Restid 2:10 h</p><p><abbr title="Ankomsttid">Ank.</abbr> 14:20 Lysekil</p></div></li></ol><div>SJ trafikerar delar av sträckan. Vi kommer göra allt vi kan för att ge dig en trevlig resa! Delar av resan ger SJ Prio-poäng. <a href="http://www.sj.se">Bra att veta om resa och symboler</a></div></div></div></div></div></section><script>/**
 * Selectors for all focusable elements
 * @type {string}
 */
const FOCUSABLE_ELEMENT_SELECTORS = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, [tabindex="0"], [contenteditable]';

const KEY_CODE_MAP = {
  TAB: 9
};

/**
 * A stateless keyboard utility to -
 * - Trap focus,
 * - Focus the correct Element
 * @param config {
 *   el: HTMLElement. The Parent element, within which the focus should be trapped
 *   focusElement: <Optional> HTMLElement. If Not provided, focus is put to the first focusable element
 * }
 * @return {Function} Function. The cleanup function. To undo everything done for handling A11Y
 */
function loopFocus(config) {
  if (!config) {
    throw new Error('Could not initialize focus-trapping - Config Missing');
  }
  const el = config.el,
        escCallback = config.escCallback,
        focusElement = config.focusElement;

  if (!el) {
    throw new Error('Could not initialize focus-trapping - Element Missing');
  }
  if (escCallback && !(escCallback instanceof Function)) {
    throw new Error('Could not initialize focus-trapping - `config.escCallback` is not a function');
  }

  const focusableElements = el.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS);
  let keyboardHandler;

  //There can be containers without any focusable element
  if (focusableElements.length > 0) {
    const firstFocusableEl = focusableElements[0],
          lastFocusableEl = focusableElements[focusableElements.length - 1],
          elementToFocus = focusElement ? focusElement : firstFocusableEl;
    elementToFocus.focus();

    keyboardHandler = function keyboardHandler(e) {
      if (e.keyCode === KEY_CODE_MAP.TAB) {
        //Rotate Focus
        if (e.shiftKey && document.activeElement === firstFocusableEl) {
          e.preventDefault();
          lastFocusableEl.focus();
        } else if (!e.shiftKey && document.activeElement === lastFocusableEl) {
          e.preventDefault();
          firstFocusableEl.focus();
        }
      }
    };
    el.addEventListener('keydown', keyboardHandler);
  }

  //The cleanup function. Put future cleanup tasks inside this.
  return function cleanUp() {

    if (keyboardHandler) {
      el.removeEventListener('keydown', keyboardHandler);
    }
  };
}
var myModal = document.querySelectorAll(".sj-table.expanded")[0];
var myClose = document.querySelectorAll("#closeBtn")[0];

loopFocus({el:myModal});

myClose.addEventListener('click', function(){
    
})</script></body></html>